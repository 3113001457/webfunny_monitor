!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){let r=wx;var n,o;o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",(n=r).btoa=n.btoa||function(e){for(var t,r,n,a,s="",i=0,c=(e=String(e)).length%3;i<e.length;){if((r=e.charCodeAt(i++))>255||(n=e.charCodeAt(i++))>255||(a=e.charCodeAt(i++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");s+=o.charAt((t=r<<16|n<<8|a)>>18&63)+o.charAt(t>>12&63)+o.charAt(t>>6&63)+o.charAt(63&t)}return c?s.slice(0,c-3)+"===".substring(c):s};var a="webfunny_20220404_181923",s="webfunnyVersionFlag",i="monitor.webfunny.cn",c="http://"+i,u=c+"/server/upMog",l="CUSTOMER_PV",g="CUS_LEAVE",f="HTTP_LOG",h="JS_ERROR",d="LAST_BROWSE_DATE",p="WM_PAGE_ENTRY_TIME",v="WM_VISIT_PAGE_COUNT",y=[h,l,f];class m{static getCurrentPages(){var e="";try{e=getCurrentPages().length?getCurrentPages()[0].route:"unknown"}catch(t){e="unknown"}return e}static getUuid(){var e=m.formatDate((new Date).getTime(),"yMdhms");return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})+"-"+e}static getCustomerKey(){var e=m.getUuid(),t=r.getStorageSync("monitorCustomerKey");return t||(r.setStorage({key:"monitorCustomerKey",data:e}),t=e),t}static isTodayBrowse(e){var t=r.getStorageSync(e),n=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate();return t&&n==t?!(!t||n!=t):(r.setStorageSync(e,n),!1)}static formatDate(e,t){var r=new Date(e).getFullYear(),n=new Date(e).getMonth()+1,o=new Date(e).getDate(),a=new Date(e).getHours(),s=new Date(e).getMinutes(),i=new Date(e).getSeconds();return n=n>9?n:"0"+n,o=o>9?o:"0"+o,a=a>9?a:"0"+a,s=s>9?s:"0"+s,i=i>9?i:"0"+i,t.replace("y",r).replace("M",n).replace("d",o).replace("h",a).replace("m",s).replace("s",i)}static getPageKey(){var e=r.getStorageSync("monitorPageKey"),t=m.getUuid();return e&&/^[0-9a-z]{8}(-[0-9a-z]{4}){3}-[0-9a-z]{12}-\d{13}$/.test(e)||(e=t),e}static setPageKey(){r.setStorage({key:"monitorPageKey",data:m.getUuid()})}static ajax(e,t,n,o,a){r.request({method:e,url:t,data:n,header:{"Content-Type":"application/json"},success:e=>{"function"==typeof o&&o(e)},fail:e=>{"function"==typeof a&&a(e)}})}static uploadCusBehavior(e,t,n){var o=r.getStorageSync("wmUserInfo"),a={webMonitorId:"webfunny_20220404_1819",userId:(o?JSON.parse(o):{}).userId,uploadType:"CUSTOMIZE_BEHAVIOR",happenTime:(new Date).getTime(),behaviorType:m.b64EncodeUnicode(e),behaviorResult:m.b64EncodeUnicode(t),description:m.b64EncodeUnicode(n)};r.request({method:"POST",url:u,data:{logs:[a]},header:{"Content-Type":"application/json"}})}static encryptObj(e){if(e instanceof Array){for(var t=[],r=0;r<e.length;++r)t[r]=m.encryptObj(e[r]);return t}if(e instanceof Object){t={};for(var r in e)t[r]=m.encryptObj(e[r]);return t}return(e+="").length>50&&(e=e.substring(0,10)+"****"+e.substring(e.length-9,e.length)),e}static getDevice(){return r.getSystemInfoSync()}static b64EncodeUnicode(e){var t=encodeURIComponent(e);try{return r.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))}catch(e){return t}}static utf8_encode(e){if(!e)return"";var t="";e=e.replace(/\r\n/g,"\n");for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}}class T{constructor(){var e=r.getStorageSync("wmUserInfo"),t=e?JSON.parse(e):{},n=m.getCurrentPages();this.wmVersion=s,this.happenTime=(new Date).getTime(),this.webMonitorId=a,this.simpleUrl=n,this.completeUrl=n,this.customerKey=m.getCustomerKey(),this.userId=t.userId,this.projectVersion=t.projectVersion||"",this.firstUserParam=m.b64EncodeUnicode(t.userTag||""),this.secondUserParam=m.b64EncodeUnicode(t.secondUserParam||"")}handleLogInfo(e,t){var n=r.getStorageSync(e),o=n||[];o.push(t),r.setStorageSync(e,o)}}class w extends T{constructor(e,t,r,n){super();var o=m.getDevice();this.uploadType=l,this.pageKey=m.getPageKey(),this.deviceName=o.model,this.os=o.system,this.browserName=o.platform,this.browserVersion=o.version,this.monitorIp="",this.country="",this.province="",this.city="",this.loadType=e,this.loadTime=t,this.newStatus=r,this.referrer=(n||"").split("?")[0].replace("#","")}}class b{constructor(e){var t=m.getCurrentPages();this.uploadType=g,this.webMonitorId=a,this.leaveType=e,this.happenTime=(new Date).getTime(),this.simpleUrl=t,this.customerKey=m.getCustomerKey()}}class S extends T{constructor(e,t,r,n){super();var o=m.getDevice();this.uploadType=e,this.infoType=t,this.pageKey=m.getPageKey(),this.deviceName=o.model,this.os=o.system,this.browserName=o.platform,this.browserVersion=o.version,this.monitorIp="",this.country="china",this.province="",this.city="",this.errorMessage=m.b64EncodeUnicode(r),this.errorStack=m.b64EncodeUnicode(n),this.browserInfo=""}}class x extends T{constructor(e,t,r,n,o,a,s,i,c){super(),this.uploadType=e,this.method=t,this.httpUrl=m.b64EncodeUnicode(r),this.status=n,this.statusText=o,this.statusResult=a,this.requestText=m.b64EncodeUnicode(s),this.responseText=m.b64EncodeUnicode(i),this.loadTime=c}}var C="";function O(){var e=m.isTodayBrowse(d),t=(new Date).getTime();r.setStorageSync(p,t);var n=m.getCurrentPages(),o=null,a=m.formatDate(t,"y-M-d"),s=n,i=r.getStorageSync(v);if(i){var c=i.split("$$$"),g=c[0],f=c[1],h=parseInt(c[2],10);a==f?s!=g&&1==h&&(r.setStorageSync(v,s+"$$$"+a+"$$$2"),o=new b(2)):(r.setStorageSync(v,s+"$$$"+a+"$$$1"),o=new b(1))}else r.setStorageSync(v,s+"$$$"+a+"$$$1"),o=new b(1);var y=r.getStorageSync("monitorCustomerKey");if(y){var T="",S=y?y.match(/\d{14}/g):[];if(S&&S.length>0){var x=S[0].match(/\d{2}/g),C=x[0]+x[1]+"-"+x[2]+"-"+x[3]+" "+x[4]+":"+x[5]+":"+x[6],O=new Date(C).getTime();T=(new Date).getTime()-O>300?0==e?"o_uv":"o":"n_uv"}}else T="n_uv",m.getCustomerKey();var P=new w("reload",0,T,"");if("n_uv"===T||"o_uv"===T){var B=[P,o];m.ajax("POST",u,B)}else P.handleLogInfo(l,P)}var P=wx;function B(){if(getCurrentPages().length){var e=m.getCurrentPages();C!=e&&(O(),C=e)}}function D(){for(var e=[],t=0;t<y.length;t++){var n=r.getStorageSync(y[t]);e=e.concat(n)}for(var o=0;o<y.length;o++)r.setStorageSync(y[o],[]);e.length>0&&m.ajax("POST",u,e,function(){},function(){})}wx=Object.create(wx),Object.defineProperty(wx,"switchTab",{writable:!1,value:function(e){var t=arguments[0].success,r=arguments[0].fail,n=arguments[0].complete;if(!(t||r||n))return new Promise((t,r)=>{arguments[0].success=function(...r){console.log("Tab切换then成功.....",e),m.uploadCusBehavior("switchTab","success","Tab切换至："+e.url),t(...r)},arguments[0].fail=function(...t){console.log("Tab切换then失败.....",e),m.uploadCusBehavior("switchTab","failed","Tab切换至："+e.url),r(...t)},P.switchTab.apply(this,arguments)});arguments[0].success=function(...r){console.log("Tab切换成功.....",e),m.uploadCusBehavior("switchTab","success","Tab切换至："+e.url),t(...r)},arguments[0].fail=function(...t){console.log("Tab切换失败.....",e),m.uploadCusBehavior("switchTab","failed","Tab切换至："+e.url),r(...t)},P.switchTab.apply(this,arguments)}}),Object.defineProperty(wx,"navigateBack",{writable:!1,value:function(e){var t=arguments[0].success,r=arguments[0].fail,n=arguments[0].complete;if(!(t||r||n))return new Promise((t,r)=>{arguments[0].success=function(...r){console.log("页面回退then成功.....",e),m.uploadCusBehavior("navigateBack","success","页面回层数："+e.delta),t(...r)},arguments[0].fail=function(...t){console.log("页面回退then失败.....",e),m.uploadCusBehavior("navigateBack","failed","页面回层数："+e.delta),r(...t)},P.navigateBack.apply(this,arguments)});arguments[0].success=function(...r){console.log("页面回退成功.....",e),m.uploadCusBehavior("navigateBack","success","页面回层数："+e.delta),t(...r)},arguments[0].fail=function(...t){console.log("页面回退失败.....",e),m.uploadCusBehavior("navigateBack","failed","页面回层数："+e.delta),r(...t)},P.navigateBack.apply(this,arguments)}}),Object.defineProperty(wx,"navigateTo",{writable:!1,value:function(e){var t=arguments[0].success,r=arguments[0].fail,n=arguments[0].complete;if(!(t||r||n))return new Promise((t,r)=>{arguments[0].success=function(...r){console.log("路由then成功.....",e),m.uploadCusBehavior("navigateTo","success","页面切换至："+e.url),t(...r)},arguments[0].fail=function(...t){console.log("路由then失败.....",e),m.uploadCusBehavior("navigateTo","failed","页面切换至："+e.url),r(...t)},P.navigateTo.apply(this,arguments)});arguments[0].success=function(...r){console.log("路由成功.....",e),m.uploadCusBehavior("navigateTo","success","页面切换至："+e.url),t(...r)},arguments[0].fail=function(...t){console.log("路由失败.....",e),m.uploadCusBehavior("navigateTo","failed","页面切换至："+e.url),r(...t)},P.navigateTo.apply(this,arguments)}}),Object.defineProperty(wx,"redirectTo",{writable:!1,value:function(e){var t=arguments[0].success,r=arguments[0].fail,n=arguments[0].complete;if(!(t||r||n))return new Promise((t,r)=>{arguments[0].success=function(...r){console.log("重定向then成功.....",e),m.uploadCusBehavior("redirectTo","success","重定向："+e.url),t(...r)},arguments[0].fail=function(...t){console.log("重定向then失败.....",e),m.uploadCusBehavior("redirectTo","failed","重定向："+e.url),r(...t)},P.redirectTo.apply(this,arguments)});arguments[0].success=function(...r){console.log("重定向成功.....",e),m.uploadCusBehavior("redirectTo","success","重定向："+e.url),t(...r)},arguments[0].fail=function(...t){console.log("重定向失败.....",e),m.uploadCusBehavior("redirectTo","failed","重定向："+e.url),r(...t)},P.redirectTo.apply(this,arguments)}}),Object.defineProperty(wx,"reLaunch",{writable:!1,value:function(e){var t=arguments[0].success,r=arguments[0].fail,n=arguments[0].complete;if(!(t||r||n))return new Promise((t,r)=>{arguments[0].success=function(...r){console.log("重启then成功.....",e),m.uploadCusBehavior("reLaunch","success","重启："+e.url),t(...r)},arguments[0].fail=function(...t){console.log("重启then失败.....",e),m.uploadCusBehavior("reLaunch","failed","重启："+e.url),r(...t)},P.reLaunch.apply(this,arguments)});arguments[0].success=function(...r){console.log("重启成功.....",e),m.uploadCusBehavior("reLaunch","success","重启："+e.url),t(...r)},arguments[0].fail=function(...t){console.log("重启失败.....",e),m.uploadCusBehavior("reLaunch","failed","重启："+e.url),r(...t)},P.reLaunch.apply(this,arguments)}}),Object.defineProperty(wx,"request",{writable:!1,value:function(e){if(-1==e.url.indexOf(i)){e.startTime=(new Date).getTime();var t=e.method,r=e.url,n=new x(f,t,r,"200","OK","request","","",0);n.handleLogInfo(f,n)}var o=arguments[0].success,a=arguments[0].fail;arguments[0].complete;if(!o)return new Promise((t,r)=>{arguments[0].success=function(...r){if(-1==e.url.indexOf(i)){var n=(new Date).getTime()-e.startTime,o=e.method,a=e.url,s=r[0],c=s.statusCode,u=JSON.stringify(e.data),l=JSON.stringify(s.data),g=parseInt("&&&responseTextLength&&&")||500;l&&l.length>g&&(l="too long");var h=new x(f,o,a,c,"OK","response",u,l,n);h.handleLogInfo(f,h)}t(...r)},arguments[0].fail=function(...t){if(-1==e.url.indexOf(i)){var n=(new Date).getTime()-e.startTime,o=e.method,a=e.url,s=t[0],c=JSON.stringify(e.data),u=s.errMsg,l=new x(f,o,a,555,"fail","response",c,u,n);l.handleLogInfo(f,l)}r(...t)},P.request.apply(this,arguments)});arguments[0].success=function(...t){if(-1==e.url.indexOf(i)){var r=(new Date).getTime()-e.startTime,n=e.method,a=e.url,s=t[0],c=s.statusCode,u=JSON.stringify(e.data),l=JSON.stringify(s.data),g=parseInt("&&&responseTextLength&&&")||500;l&&l.length>g&&(l="too long");var h=new x(f,n,a,c,"OK","response",u,l,r);h.handleLogInfo(f,h)}o(...t)},arguments[0].fail=function(...t){if(-1==e.url.indexOf(i)){var r=(new Date).getTime()-e.startTime,n=e.method,o=e.url,s=t[0],c=JSON.stringify(e.data),u=s.errMsg,l=new x(f,n,o,555,"fail","response",c,u,r);l.handleLogInfo(f,l)}a(...t)},P.request.apply(this,arguments)}}),wx.webfunny=function(e){var t=(new Date).getTime();setInterval(function(){B();let e=(new Date).getTime(),n=e-t;r.getStorageSync(f).length>10?D():n>=8e3&&(D(),t=e)},1e3);var n={onLaunch:function(){O()},onError:function(e){var t="";"string"==typeof e?t=e:"object"==typeof e&&(t=e.stack||"");var r=t.split("\n")[2];m.getCurrentPages(),function(e,t,r,n,o,a){B();var s=new S(h,e,t||"",a||"");s.handleLogInfo(h,s)}("on_error",r,0,0,0,t)}};for(const t in n){const r="function"==typeof e[t]&&e[t];e[t]=function(){n[t].apply(this,arguments),r&&r.apply(this,arguments)}}return e}}]);